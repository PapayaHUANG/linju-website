---
import { getCollection } from 'astro:content'

import MainLayout from '../layouts/MainLayout.astro'
import Main from '../components/home/Main.astro'

const podcasts = await getCollection('podcast', ({ id }) => {
  return id.startsWith('cn/')
})

import { getLangFromUrl, useTranslations } from '../i18n/utils'

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)
---

<MainLayout title='home'>
  <Main {...{ podcasts, t, lang }} />
</MainLayout>
